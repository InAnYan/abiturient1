{% extends "wrapper.html" %}

{% load static %}
{% load crispy_forms_tags %}

{% block content %}

    <p>Step {{ wizard.steps.step1 }} of {{ wizard.steps.count }}</p>

    <form action="" method="post" novalidate>
        {% csrf_token %}

        <table>
            {{ wizard.management_form }}

            {% if wizard.form.forms %}
                {{ wizard.form.management_form }}

                {% for form in wizard.form.forms %}
                    <div class="formset_row">
                        {{ form | crispy }}
                    </div>
                {% endfor %}
            {% else %}
                {{ wizard.form | crispy }}
            {% endif %}
        </table>
        
        {% if wizard.steps.prev %}
            <button name="wizard_goto_step"
                    type="submit"
                    value="{{ wizard.steps.first }}">First step</button>
            <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}">Previous step</button>
        {% endif %}

        <button type="submit" class="btn btn-primary">Підтвердити</button>
    </form>

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="{% static 'jquery.formset.js' %}"></script>

{% if wizard.form.forms %}
    <script type="text/javascript">
        $('.formset_row').formset({
            addText: 'add family member',
            deleteText: 'remove',
            prefix: '{{ wizard.form.prefix }}'
        });
    </script>
{% endif %}

{% endblock content %}
